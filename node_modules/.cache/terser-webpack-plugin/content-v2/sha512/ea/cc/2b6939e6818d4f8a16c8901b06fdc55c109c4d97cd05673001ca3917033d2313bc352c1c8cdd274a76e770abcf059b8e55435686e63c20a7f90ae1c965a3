{"code":"!function(e,r){for(var t in r)e[t]=r[t]}(exports,function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&r&&\"string\"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,\"a\",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p=\"\",t(t.s=6)}([function(e,r){e.exports=require(\"express\")},function(e,r){e.exports=require(\"serverless-http\")},,,,,function(e,r,t){(function(r){var n=t(0),o=t(1),i=t(7),a=t(8),u=t(9),c=t(10).v4,s=n(),p=i({dest:\"/tmp/uploads/\"});s.use(n.json()),s.use(n.urlencoded({extended:!0})),s.post(\"/generate-ar\",p.fields([{name:\"targetImage\",maxCount:1},{name:\"outputFile\",maxCount:1}]),(function(e,r){try{var t,n=e.files.targetImage[0],o=e.files.outputFile?e.files.outputFile[0]:null,i=e.body.outputType,s=e.body.youtubeLink,p=c(),l=a.join(\"/tmp\",\"ar-experiences\",p);u.mkdirSync(l,{recursive:!0}),u.renameSync(n.path,a.join(l,\"target.jpg\")),o&&(t=a.join(l,o.originalname),u.renameSync(o.path,t));var f={targetImage:\"/ar-experiences/\".concat(p,\"/target.jpg\"),outputType:i,outputFile:o?\"/ar-experiences/\".concat(p,\"/\").concat(o.originalname):null,youtubeLink:s};u.writeFileSync(a.join(l,\"ar-data.json\"),JSON.stringify(f));var d=\"https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=\".concat(encodeURIComponent(\"https://webarv0.netlify.app/ar-view/\".concat(p))),v=\"https://webarv0.netlify.app/ar-view/\".concat(p);r.json({success:!0,qrCodeUrl:d,uniqueUrl:v,arExperienceId:p})}catch(e){console.error(\"Error generating AR experience:\",e),r.status(500).json({success:!1,error:\"Failed to generate AR experience\"})}})),s.get(\"/ar-view/:id\",(function(e,t){try{var n=e.params.id,o=a.join(\"/tmp\",\"ar-experiences\",n,\"ar-data.json\");if(u.existsSync(o)){JSON.parse(u.readFileSync(o,\"utf-8\"));t.sendFile(a.join(r,\"public\",\"ar-view.html\"))}else t.status(404).send(\"AR experience not found\")}catch(e){console.error(\"Error serving AR view:\",e),t.status(500).send(\"Error serving AR view\")}})),e.exports.handler=o(s)}).call(this,\"/\")},function(e,r){e.exports=require(\"multer\")},function(e,r){e.exports=require(\"path\")},function(e,r){e.exports=require(\"fs\")},function(e,r){e.exports=require(\"uuid\")}]));","extractedComments":[]}